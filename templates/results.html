{% extends "report.html" %}
{% block results %}
<h1>Results</h1>

{% for race in races -%}
<h2>Race {{ race.name }}</h2>
<p>{{ race.n_total }} tests ran. </p>

{% for model_set in race.model_sets -%}
<h2>Tests for {{ model_set.name }}</h2>
<p class="filter" hidden="true">(Un)check the boxes to filter the results.</p>
<h2>Results</h2>
{% macro checkbox(type, n) -%}
<input 
    checked="true" 
    class="filter" 
    data-suffix-id="{{ race.name }}" 
    data-test-result="{{ type }}" 
    hidden="true" 
    name="filter_checkbox" 
    onChange="filter_table(this)" 
    type="checkbox" 
/>
<span class="{{ type }}">{{ n }} {{ type }}</span>
{%- endmacro %}
{{ checkbox('passed',  model_set.n_passed) }},
{{ checkbox('skipped', model_set.n_skipped) }},
{{ checkbox('failed',  model_set.n_failed) }},
{{ checkbox('error',   model_set.n_errors) }},
{{ checkbox('xfailed', model_set.n_xfail) }},
{{ checkbox('xpassed', model_set.n_xpass) }}

<table class="results-table" id="results-table-{{ race.name }}">
    <thead id="_default-results-table-head">
        <tr>
            <th class="sortable result initial-sort" col="result">Result</th>
            <th class="sortable" col="name">Test</th>
            <th class="sortable numeric" col="duration">Duration</th>
            <th>Links</th>
        </tr>
        <tr hidden="true" id="not-found-message{{ race.name }}">
            <th colspan="4">No results found. Try to check the filters</th>
        </tr>
    </thead>
    {% for test in model_set.tests -%}
        {% block table_row scoped -%}{%- endblock %}
    {%- endfor %}
</table>
{%- endfor %}

{%- endfor %}
{% endblock %}